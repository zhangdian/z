# 2013-04-07-email-authentation

要想让邮件准确的到达目标客户的收件箱，最好的方法就是满足ISPs的需要，其中对邮件信息进行验证是很重要的部分。

<!-- more -->

####什么是邮件验证
主要有三个部分的邮件验证：

#####IP反解
对于设置了反向解析的IP认为是固定IP，可以追查到使用人。如果发了大量垃圾邮件可以通知IP管理单位协助封停。而对于没有反向解的IP被认为是动态IP，或不可信IP，被大量用来发送垃圾邮件。

#####SenderID / SPF
SenderID和SPF是基于IP的验证。在这种验证机制中，Sender指定哪些IP是属于一个指定的域名的（Sender的域名）。

当一个Sender请求一个到ISP得连接的时候，这个ISP使用这个技术，到 DNS上查询这个IP是否在这个域名的SPF记录下面，也就是这个IP有没有使用这个域名发送邮件的权限。

Gmail和Yahoo会验证SPF，Hotmail会验证SenderID。
SPF和SenderID的区别是获取Sender的算法不同。

#####Domain Keys / DKIM
Domain Keys/DKIM是加密的邮件内容加密算法。在这种机制中，sender在邮件原文中添加一个DKIM-Signature字段，用于ISPs对接收到得内容进行验证。

ISP获取发送域名（DKIM-Signature中的h字段）和DKIM-Signature数字签名，执行一次DNS查询获取到公钥，然后进行邮件正文内容验证。

Gmail和Hotmail验证DKIM，yahoo验证Domain keys

####是否一定需要进行验证？
如果你的消息没有进行任何验证，那么ISPs__可能会__拒绝连接。所以使用所有的验证机制是比较好的。

####使用了验证机制后，邮件就不会被拒绝了吗？
ISPs主要还是使用你的IP和域名的__信誉度__来决定是否接受或者拒绝你的邮件，或者将邮件发送到收件箱还是垃圾箱。

验证机制可以帮助ISP来验证你的身份或者邮件内容，但是他并不能提高你的信誉度。

换句话说，验证不一定能提高你的邮件到达率。但是如果没有验证的话，即使你有一个很好的信誉度，也会影响到邮件的到达率。

####信誉度和验证
上述的三种验证，只能验证IP是否是固定IP，IP是否有权限以声明为某域名发送邮件，邮件内容是否被纂改，但是不能确保你发送的邮件不是垃圾邮件等等。__所以IP和域名的信誉度才是邮件到达率更关键的因素。__

