# 架构

## nginx haproxy lvs

* nginx：7层，可以根据url，域名配置；只支持http；
* haproxy：4层或7层；
* lvs：4层，链路层转发
* 

虚拟IP是根据ARP实现的。通过改变IP地址的MAC地址。

## 网站的架构模式

* 分层：应用层，业务层，数据层
* 分割：业务分割
* 分布式：分层和分割的重要目的就是分布式部署
* 集群：多个机器提供相同的服务
* 缓存：CDN，反向代理，本地缓存，分布式缓存
* 异步：生产者消费者
* 冗余：冷备，热备，灾备数据中心
* 自动化：发布，代码管理，测试，报警，失效转移，降级
* 安全
 

## 网站架构的核心要素

* 性能
* 可用性
* 伸缩性
* 扩展性
* 安全性

## 性能

### 网站性能测试

* 不同视角：用户视角、开发人员视角、运维人员视角；

* 测试指标：响应时间、并发数、吞吐量（HPS,TPS,QPS）、其他性能指标

* 测试方法：性能测试、负载测试、压力测试、稳定性测试

### Web前端性能优化

* 浏览器访问优化：浏览器缓存，压缩，减少cookie传输等
* CDN加速
* 反向代理

### 应用服务器性能优化

* 
